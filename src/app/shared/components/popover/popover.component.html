<!-- <div #backdropEl
  (click)="close()"
  (mousedown)="onBackdropMouseDown($event)"
  (mouseup)="onBackdropMouseUp($event)"
  class="fixed inset-0 bg-black/30 z-[60]">
</div> -->

@if (visible) {
  <div #backdropEl
    (click)="close()"
    class="fixed inset-0 z-[60]"
    [ngClass]="{
      'bg-black/30': visible && highlighted,
      'pointer-events-none': !closable,
    }">
  </div>
}


@if (triggerTemplate) {
  <div #triggerEl
    (click)="onTriggerClick()"
    class="relative inline-block"
    before=""
    [ngClass]="{
      'before:absolute before:-top-[5px] before:-left-[5px] before:-right-[5px] before:-bottom-[5px] before:content-[attr(before)] before:z-[60] before:bg-white before:rounded-lg': visible && highlighted,
    }"
    [class]="customTriggerClasses">
    <div class="relative"
      [ngClass]="{
        'z-[70]': visible,
      }">
      <ng-container *ngTemplateOutlet="triggerTemplate"></ng-container>
    </div>
  </div>
}

<div
  #popoverEl
  class="absolute z-[60] flex flex-col text-sm text-gray-500 transform transition duration-200 ease-out bg-white rounded-xl shadow-xs dark:text-gray-400 dark:bg-gray-800 p-4 gap-4"
  [attr.data-popper-placement]="placement"
  [ngClass]="classMap"
>
  @if (title) {
    <div class="flex flex-col gap-1 text-base leading-[18px] text-main-blue1h">
      <div class="flex items-center justify-between">
        <h3 class="font-semibold dark:text-white">
          {{ title }}
        </h3>
        @if (showCloseButton) {
          <app-button (click)="close()" variant="primary" size="sm" styleType="ghost">
            <svg width="16" height="16">
              <use xlink:href="/assets/icons/outline/general.svg#close" />
            </svg>
          </app-button>
        }
      </div>

      @if (text) {
        <p class="font-normal">{{ text }}</p>
      }
    </div>
  }

  @if (contentTemplate) {
    <ng-container *ngTemplateOutlet="contentTemplate"></ng-container>
  }

  <div
    data-popper-arrow
    class="popover-arrow"
    [class.highlighted]="highlighted">
  </div>

</div>
